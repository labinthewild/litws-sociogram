<!-- Template for the results page -->
<div id="participant_results" data-self="{{ data.self }}" data-others="{{ data.others }}"></div>
<h3 class="bolded-blue" style="text-align: center">{{ data.result_msg }}</h3>

<br>
{{#if data.code}}
<h5 style="text-align: center">
    <span data-i18n="litw-results-code"></span>
    <span>{{ data.code }}</span>
</h5>
<br>
{{/if}}
<br>

<div id="results-main" class="container text-center">
    <div id="results-explain">
        <p data-i18n="study-socio-results-exp-p1"></p>
        <p data-i18n="study-socio-results-exp-p2"></p>
    </div>
    <div id="results-graph"></div>
</div>
<div class="accordion pb-4" id="accordionPanelsStayOpenExample">
  <div class="accordion-item">
    <h2 class="accordion-header">
      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
              data-bs-target="#panelsStayOpen-collapseTwo" aria-expanded="false"
              aria-controls="panelsStayOpen-collapseTwo" data-i18n="study-socio-results-ref-title">
      </button>
    </h2>
    <div id="panelsStayOpen-collapseTwo" class="accordion-collapse collapse">
      <div class="accordion-body">
        <p data-i18n="study-socio-results-ref-1"></p>
        <p data-i18n="study-socio-results-ref-2"></p>
      </div>
    </div>
  </div>
  <!--div class="accordion-item">
    <h2 class="accordion-header">
      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
              data-bs-target="#panelsStayOpen-collapseThree" aria-expanded="false"
              aria-controls="panelsStayOpen-collapseThree" data-i18n="litw-results-ref-title">
      </button>
    </h2>
    <div id="panelsStayOpen-collapseThree" class="accordion-collapse collapse">
      <div class="accordion-body">
        <p class="text-center" style="margin-top: 30px;" data-i18n="litw-results-paper-info1"></p>
        <a  style="max-width: 900px; text-align: center; margin: auto; margin-bottom: 30px;" data-i18n="litw-results-paper-citation" href="https://doi.org/10.1080/002075998400213"></a>
      </div>
    </div>
  </div-->
</div>


<div id="results-footer"></div>


<script type="text/javascript">
    let draw_results = () => {
        let results_data = document.getElementById('participant_results').dataset;
        let US_FACTOR = 0.8; //TODO: try to calculate this in px2mm! (should be 6mm)
        let JP_FACTOR = 1.1; //TODO: try to calculate this in px2mm! (should be 6mm)
        LITW.study.sociogram_results_draw([
            {radius: results_data.self, label: $.i18n('study-socio-results-self')},
            {radius: results_data.others, label: $.i18n('study-socio-results-others-you')},
            {radius: results_data.self*US_FACTOR, label: $.i18n('study-socio-results-others-US')},
            {radius: results_data.self*JP_FACTOR, label: $.i18n('study-socio-results-others-JP')},
        ], $.i18n('study-socio-results-others'));
    }
    $(document).ready(function() {
        LITW.study.sociogram_results('results-graph');
        draw_results();
    });
</script>
